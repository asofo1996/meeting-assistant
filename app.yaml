runtime: python311
instance_class: F2

entrypoint: gunicorn --worker-class gevent -w 1 run:socketio

env_variables:
  INSTANCE_CONNECTION_NAME: "realtime-meeting-app-465901:asia-northeast3:meeting-db"
  DB_USER: "postgres"
  DB_PASS: "1234"
  DB_NAME: "postgres"
  OPENAI_API_KEY_SECRET_NAME: "openai-api-key"

handlers:
- url: /static
  static_dir: app/static

- url: /.*
  script: auto

# 앱이 트래픽을 받을 준비가 되었는지 확인하는 설정
readiness_check:
  path: "/health"
  check_interval_sec: 5
  timeout_sec: 4
  failure_threshold: 2
  success_threshold: 2

